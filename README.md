### Лабораторная работа №3

Выполнил: Новоселов Борис

Группа: P34112

Цель: получить навыки работы с вводом/выводом, потоковой обработкой данных, командной строкой.

В рамках лабораторной работы вам предлагается повторно реализовать лабораторную работу по предмету "Вычислительная математика" посвящённую аппроксимации (в разные годы это лабораторная работа 3 или 4) со следующими дополнениями:

- дополнительно должна быть реализована "аппроксимация" отрезками;
- настройки алгоритма аппроксимирования и выводимых данных должны задаваться через аргументы командной строки:
    - какие алгоритмы использовать (в том числе два сразу);
    - частота дискретизации;
    - и т.п.;
- входные данные должны задаваться в текстовом формате на подобии ".csv" (к примеру `x;y\n` или `x\ty\n`) и подаваться на стандартный ввод, входные данные должны быть отсортированы по возрастанию x;
- выходные данные должны подаваться на стандартный вывод;
- программа должна работать в потоковом режиме (пример -- `cat | grep 11`).

Приложение должно быть организовано следующим образом:

```text
    +---------------------------+
    | обработка входного потока |
    +---------------------------+
            |
            | поток / список / последовательность точек
            v
    +------------------------+      +------------------------------+
    | алгоритм аппроксимации |<-----| генератор точек, для которых |
    +------------------------+      | необходимо вычислить         |
            |                       | апроксимированное значение   |
            |                       +------------------------------+
            |
            | поток / список / последовательность рассчитанных точек
            v 
    +------------------------+
    | печать выходных данных |
    +------------------------+
```

Потоковый режим для алгоритмов, работающих с группой точек должен работать следующим образом:

```text
o o o o o o . . x x x
  x x x . . o . . x x x
    x x x . . o . . x x x
      x x x . . o . . x x x
        x x x . . o . . x x x
          x x x . . o . . x x x 
            x x x . . o o o o o o EOF
```

где:

- каждая строка -- окно данных, на основании которых производится расчёт алгоритма;
- строки сменяются по мере поступления в систему новых данных (старые данные удаляются из окна, новые -- добавляются);
- `o` -- рассчитанные данные, можно видеть:
    - большинство окон используется для расчёта всего одной точки, так как именно в "центре аппроксимации" результат наиболее точен;
    - первое и последнее окно используются для расчёта большого количества точек, так лучших данных для расчёта у нас не будет.
- `x` -- точки, расчёт которых для "окон" не требуется.

Общие требования:

- программа должна быть реализована в функциональном стиле;
- ввод/вывод должен быть отделён от алгоритмов аппроксимации;
- требуется использовать идиоматичный для технологии стиль программирования.

### Использованные алгоритмы:
- аппроксимация отрезками
``` haskell
segmentApproximation :: Interval -> Double -> Points -> CalculatedPoints
segmentApproximation interval step list =
    let
        left = fst interval
        right = snd interval
        xList = getXList list
        yList = getYList list
        generatedX = calculatedX left right step
        generatedY = map (\mx -> mx >>= \x -> toLower x xList >>= \y -> toUpper x xList >>= \z ->calcForSegment x y z xList yList) generatedX
    in
        Segment generatedX generatedY
```
- линейная аппроксимация
``` haskell
linearApproximation :: Interval -> Double -> Points -> CalculatedPoints
linearApproximation interval step list =
    let
        left = fst interval
        right = snd interval
        xList = getXList list
        yList = getYList list
        xxList = map (\x -> x*x) xList
        xyList = zipWith (*) xList yList

        coefficients = calcLinearCoefficients xList xxList yList xyList
        generatedX = calculatedX left right step
        generatedY = map (\mx -> mx >>= \x -> return $ fst coefficients * x + snd coefficients) generatedX
    in
        Linear generatedX generatedY
```
### Пример вывода программы:

``` text
Segment Aproxiation
x: 1.0 y: "undefined"
x: 1.95 y: 2.95
x: 2.9 y: 3.9
x: 3.8499999999999996 y: 4.85
x: 4.8 y: 5.8
x: 5.75 y: 6.75
x: 6.699999999999999 y: 7.699999999999998
x: 7.6499999999999995 y: 8.649999999999999
x: 8.6 y: 9.6
x: 9.549999999999999 y: "undefined"
```
